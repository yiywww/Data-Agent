@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Dark Theme (Default in Prototype, but we map to Shadcn structure) */
    --background: 222 10% 13%; /* #1e1f22 */
    --foreground: 220 10% 75%; /* #bcbec4 */

    --card: 222 10% 13%;
    --card-foreground: 220 10% 75%;

    --popover: 222 10% 18%; /* #2b2d30 */
    --popover-foreground: 220 10% 75%;

    --primary: 220 88% 58%; /* #3574f0 */
    --primary-foreground: 0 0% 100%;

    --secondary: 222 10% 18%; /* #2b2d30 */
    --secondary-foreground: 220 5% 50%; /* #7c7f84 */

    --muted: 222 10% 18%;
    --muted-foreground: 220 5% 50%;

    --accent: 222 10% 20%; /* #2e2f33 */
    --accent-foreground: 220 10% 75%;

    --destructive: 0 91% 71%; /* #f87171 */
    --destructive-foreground: 0 0% 100%;

    --border: 212 5% 32%; /* #4e5155 */
    --input: 212 5% 32%;
    --ring: 220 88% 58%;

    --radius: 0.5rem;

    /* Prototype Specific Variables */
    --bg-main: #1e1f22;
    --bg-panel: #2b2d30;
    --bg-popup: #2b2d30;
    --bg-hover: #2e2f33;
    --bg-selected: #2e436e;
    --border-color: #4e5155;
    --text-primary: #bcbec4;
    --text-secondary: #7c7f84;
    --accent-blue: #3574f0;
    --accent-hover: #3369d6;

    /* Syntax Highlighting (Dark) */
    --syntax-keyword: #cc7832;
    --syntax-string: #6a8759;
    --syntax-func: #ffc66d;
    --syntax-number: #6897bb;
    --syntax-comment: #808080;
    --syntax-punct: #a9b7c6;
    --caret-color: #a9b7c6;

    /* Semantic Colors (Dark) */
    --text-success: #4ade80;
    --text-error: #f87171;
    --text-link: #60a5fa;
    --bg-row-hover: rgba(30, 58, 138, 0.3);

    /* Markdown / AI Chat (Dark) */
    --bg-code-block: #1e1f22;
    --bg-inline-code: rgba(255, 255, 255, 0.1);
    --text-markdown-strong: #ffffff;
    --border-markdown-block: #4e5155;

    /* User Message Bubble (Dark) */
    --user-msg-bg-dark: #3574f0;
    --user-msg-text-dark: #ffffff;
  }

  .light {
    --background: 0 0% 100%; /* #ffffff */
    --foreground: 215 25% 17%; /* #1f2937 */

    --card: 0 0% 100%;
    --card-foreground: 215 25% 17%;

    --popover: 0 0% 100%;
    --popover-foreground: 215 25% 17%;

    --primary: 220 88% 58%; /* #3574f0 */
    --primary-foreground: 0 0% 100%;

    --secondary: 210 20% 95%; /* #f2f2f2 */
    --secondary-foreground: 215 16% 47%; /* #6b7280 */

    --muted: 210 20% 95%;
    --muted-foreground: 215 16% 47%;

    --accent: 214 32% 91%; /* #e2e6ec */
    --accent-foreground: 215 25% 17%;

    --destructive: 0 72% 51%; /* #dc2626 */
    --destructive-foreground: 0 0% 100%;

    --border: 214 32% 85%; /* #d1d5db */
    --input: 214 32% 85%;
    --ring: 220 88% 58%;

    /* Prototype Specific Variables (Light) */
    --bg-main: #ffffff;
    --bg-panel: #f2f2f2;
    --bg-popup: #ffffff;
    --bg-hover: #e2e6ec;
    --bg-selected: #b4d1f5;
    --border-color: #d1d5db;
    --text-primary: #1f2937;
    --text-secondary: #6b7280;
    --accent-blue: #3574f0;
    --accent-hover: #265cc2;

    /* Syntax Highlighting (Light) */
    --syntax-keyword: #0033b3;
    --syntax-string: #067d17;
    --syntax-func: #00627a;
    --syntax-number: #1750eb;
    --syntax-comment: #8c8c8c;
    --syntax-punct: #000000;
    --caret-color: #000000;

    /* Semantic Colors (Light) */
    --text-success: #16a34a;
    --text-error: #dc2626;
    --text-link: #2563eb;
    --bg-row-hover: #e0e7ff;

    /* Markdown / AI Chat (Light) */
    --bg-code-block: #f5f5f5;
    --bg-inline-code: rgba(0, 0, 0, 0.05);
    --text-markdown-strong: #000000;
    --border-markdown-block: #d1d5db;

    /* User Message Bubble (Light) */
    --user-msg-bg-light: #ffffff;
    --user-msg-text-light: #1f2937;
    --user-msg-border-light: #e5e7eb;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground transition-colors duration-300;
    font-family: 'Inter', sans-serif;
    overflow: hidden;
  }

  /* Fix autofill background in dark mode */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px hsl(var(--background)) inset !important;
    -webkit-text-fill-color: hsl(var(--foreground)) !important;
    transition: background-color 5000s ease-in-out 0s;
  }
}

@layer components {
  .code-font {
    font-family: 'JetBrains Mono', monospace;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  ::-webkit-scrollbar-track {
    background: var(--bg-main);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 5px;
    border: 2px solid var(--bg-main);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #6e7175;
  }

  /* Splitter Resizer */
  .resizer-handle {
    @apply w-[1px] bg-border cursor-col-resize z-50 relative transition-colors duration-200 flex-shrink-0;
  }

  .resizer-handle::after {
    content: '';
    @apply absolute -left-1 -right-1 top-0 bottom-0 bg-transparent z-10 cursor-col-resize;
  }

  .resizer-handle:hover,
  .resizer-handle.active {
    @apply bg-primary w-[2px];
  }

  /* Prototype Utility Classes */
  .theme-bg-main { background-color: var(--bg-main); }
  .theme-bg-panel { background-color: var(--bg-panel); }
  .theme-bg-popup { background-color: var(--bg-popup); }
  .theme-bg-hover:hover { background-color: var(--bg-hover); }
  .theme-border { border-color: var(--border-color); }
  .theme-text-primary { color: var(--text-primary); }
  .theme-text-secondary { color: var(--text-secondary); }
  .theme-text-success { color: var(--text-success); }
  .theme-text-error { color: var(--text-error); }
  .theme-text-link { color: var(--text-link); }
  .theme-row-hover:hover { background-color: var(--bg-row-hover); }

  /* Tab Styles */
  .tab-active {
    background-color: var(--bg-main);
    border-top: 2px solid var(--accent-blue);
    color: var(--text-primary);
  }

  /* Animations */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(5px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.3s ease-out forwards;
  }
}